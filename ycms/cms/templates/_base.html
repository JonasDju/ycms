{% extends "_raw.html" %}
{% load i18n %}
{% load static %}
{% comment %}
Copyright [2019] [Integreat Project]
Copyright [2023] [YCMS]

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
{% block raw_content %}
    {% if messages and not messages_suppressed %}
        <div id="messages"
             class="absolute top-32 right-8 flex flex-col max-w-screen-sm z-50">
            {% for msg in messages %}
                {% if msg.level_tag == 'info' %}
                    <div class="message bg-blue-100 border-l-4 border-blue-500 text-blue-500"
                         role="alert">
                        <p>{{ msg.message }}</p>
                        <i icon-name="x" class="message-close"></i>
                    </div>
                {% endif %}
                {% if msg.level_tag == 'success' %}
                    <div class="message bg-green-100 border-l-4 border-green-500 text-green-500"
                         role="alert">
                        <p>{{ msg.message }}</p>
                        <i icon-name="x" class="message-close"></i>
                    </div>
                {% endif %}
                {% if msg.level_tag == 'warning' %}
                    <div class="message bg-yellow-100 border-l-4 border-yellow-500 text-yellow-600"
                         role="alert">
                        <p>{{ msg.message }}</p>
                        <i icon-name="x" class="message-close"></i>
                    </div>
                {% endif %}
                {% if msg.level_tag == 'error' %}
                    <div class="message bg-red-100 border-l-4 border-red-500 text-red-500"
                         role="alert">
                        <p>{{ msg.message }}</p>
                        <i icon-name="x" class="message-close"></i>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}
    <div id="sidebar" class="absolute h-full w-64 bg-white border-r shadow-md">
        <a href="{% url 'cms:protected:index' %}" class="block border-b">
            <img src="{% static 'images/logo-ycms.png' %}"
                 width="200px"
                 height="auto"
                 alt="{% translate " Logo" %}"
                 class="my-3 mx-auto">
        </a>
        <ul>
            <span class="block mt-5 px-5 text-gray-500 tracking-wide">{% translate "General" %}</span>
            {% if perms.cms.add_ward %}
                <li>
                    {% url 'cms:protected:zbm' as url %}
                    <a href="{{ url }}"
                       class="{% if request.path == url %}selected{% endif %}">
                        <i icon-name="activity"></i> {% translate "ZBM View" %}
                    </a>
                </li>
            {% endif %}
            <li>
                {% url 'cms:protected:patients' as url %}
                <a href="{{ url }}"
                   class="{% if request.path == url %}selected{% endif %}">
                    <i icon-name="folder-search"></i> {% translate "Manage Patients" %}
                </a>
            </li>
            <span class="block mt-5 px-5 text-gray-500 tracking-wide">{% translate "Ward" %}</span>
            <li>
                {% url 'cms:protected:ward_detail_default' as url %}
                <a href="{{ url }}"
                   class="{% if request.path == url %}selected{% endif %}">
                    <i icon-name="bed"></i> {% translate "Ward View" %}
                </a>
            </li>
            {% if perms.cms.add_patient %}
                <li>
                    {% url 'cms:protected:intake' as url %}
                    <a href="{{ url }}"
                       class="{% if request.path == url %}selected{% endif %}">
                        <i icon-name="user-plus"></i> {% translate "Patient Intake" %}
                    </a>
                </li>
            {% endif %}
            <span class="block mt-5 px-5 text-gray-500">{% translate "Settings" %}</span>
            {% if user.group.name != "MEDICAL_PERSONNEL" %}
                <li>
                    {% url 'cms:protected:create_user' as url %}
                    <a href="{{ url }}"
                       class="{% if request.path == url %}selected{% endif %}">
                        <i icon-name="smile-plus"></i> {% translate "Create User" %}
                    </a>
                </li>
            {% endif %}
            <li>
                {% url 'cms:protected:settings' as url %}
                <a href="{{ url }}"
                   class="{% if request.path == url %}selected{% endif %}">
                    <i icon-name="sliders-horizontal"></i> {% translate "Settings" %}
                </a>
            </li>
            <li>
                {% url 'cms:public:logout' as url %}
                <a href="{{ url }}">
                    <i icon-name="log-out"></i> {% translate "Logout" %}
                </a>
            </li>
        </ul>
        <div class="absolute bottom-0 w-full text-center text-gray-600">
            <li class="mb-4" id="timetravel-start">
                <a href="?time=2024-01-01T00%3A00%3A00.000Z" class="justify-center"><i icon-name="timer-reset"></i> {% translate "Start Timetravel" %}</a>
            </li>
            <li class="hidden mb-4" id="timetravel-stop">
                <a href="?" class="justify-center"><i icon-name="timer-off"></i> {% translate "Stop Timetravel" %}</a>
            </li>
            <p class="text-sm">
                {% translate "Logged in as" %} <span class="text-blue-500">{{ user.first_name }} {{ user.last_name }}</span>
            </p>
            <p class="tracking-wide">Â© YCMS 2023</p>
        </div>
    </div>
    <div class="p-6 ml-64 h-full overflow-y-auto">
        {% block content %}
        {% endblock content %}
        {% include "timetravel_controls.html" %}
    </div>
{% endblock raw_content %}
